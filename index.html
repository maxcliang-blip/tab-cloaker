<!DOCTYPE html>
<html>
<head>
    <title>404 Not Found</title>
    <link rel="icon" type="image/png" href="https://ssl.gstatic.com">
    <style>
        body { margin: 0; font-family: sans-serif; background: #fff; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        #shadow { text-align: center; color: #333; }
        #error404 { font-size: 50px; cursor: default; user-select: none; }
        .trigger { cursor: pointer; color: inherit; }
        
        #mainUI { display: none; background: #111; color: white; min-height: 100vh; width: 100%; flex-direction: column; justify-content: center; align-items: center; }
        .container { background: #222; padding: 30px; border-radius: 10px; text-align: center; border: 1px solid #444; width: 500px; box-shadow: 0 10px 30px rgba(0,0,0,0.8); }
        input { display: block; width: 90%; padding: 12px; margin: 8px auto; border-radius: 5px; border: 1px solid #555; background: #000; color: #0f0; font-family: monospace; }
        button { padding: 10px 20px; cursor: pointer; background: #1a73e8; color: white; border: none; border-radius: 5px; font-weight: bold; width: 100%; margin-top: 10px; }
        .launch-btn { background: #34a853; font-size: 1.1rem; }
        label { display: block; text-align: left; margin: 10px 20px 0 20px; font-size: 0.8rem; color: #888; }
        #favList { margin-top: 10px; text-align: left; background: #111; padding: 10px; border: 1px solid #333; max-height: 80px; overflow-y: auto; font-size: 0.8rem; }
    </style>
</head>
<body onload="checkSecurity()">

    <div id="shadow">
        <h1 id="error404">Error <span class="trigger" onclick="unlock()">4</span>04</h1>
        <p>The requested URL was not found on this server.</p>
    </div>

    <div id="mainUI">
        <div class="container">
            <h1>Elite Cloaker v31 (UV)</h1>
            <input type="password" id="pswd" placeholder="Master Key...">
            
            <div id="controls" style="display:none;">
                <label>1. Your Ultraviolet Proxy URL:</label>
                <input type="text" id="uvBase" placeholder="https://uv-static-2-0-six.vercel.app/active" value="">
                
                <label>2. Target Site (encoded through UV):</label>
                <input type="text" id="target" placeholder="https://google.com">
                <button onclick="saveLink()">Save Link</button>
                <div id="favList"></div>

                <hr style="border:0; border-top:1px solid #444; margin:15px 0;">
                
                <input type="text" id="panic" value="https://classroom.google.com">
                <button class="launch-btn" onclick="launch()">Launch UV Cloak</button>
            </div>
            
            <button id="unlckBtn" onclick="verify()">Unlock</button>
        </div>
    </div>

    <script>
        const PASS = "LAXMIANGLIKESTOBANG"; 

        function unlock() { document.getElementById('shadow').style.display='none'; document.getElementById('mainUI').style.display='flex'; document.title="Classes"; }
        
        function verify() { 
            if(document.getElementById('pswd').value === PASS) { 
                document.getElementById('controls').style.display='block'; 
                document.getElementById('unlckBtn').style.display='none'; 
                document.getElementById('pswd').style.display='none';
                renderFavs();
                // Load saved UV URL if exists
                document.getElementById('uvBase').value = localStorage.getItem('uvBase') || "";
            } 
        }

        function saveLink() {
            const url = document.getElementById('target').value;
            let favs = JSON.parse(localStorage.getItem('encFavs') || "[]");
            favs.push(btoa(url)); // Basic obfuscation
            localStorage.setItem('encFavs', JSON.stringify(favs));
            renderFavs();
        }

        function renderFavs() {
            const list = document.getElementById('favList');
            const favs = JSON.parse(localStorage.getItem('encFavs') || "[]");
            list.innerHTML = favs.length ? '' : 'No Saved Links';
            favs.forEach((enc) => {
                const dec = atob(enc);
                list.innerHTML += `<div style="padding:2px;cursor:pointer;color:#4285F4;" onclick="document.getElementById('target').value='${dec}'">${dec}</div>`;
            });
        }

        function launch() {
            const uvBase = document.getElementById('uvBase').value.replace(/\/$/, ""); 
            const targetUrl = document.getElementById('target').value;
            const esc = document.getElementById('panic').value;

            // Save UV base for next time
            localStorage.setItem('uvBase', uvBase);

            // Ultraviolet encoding logic (XOR/Base64)
            // Note: Most UV setups use /service/ + encoded URL
            const encodedUrl = btoa(targetUrl).replace(/\//g, '_').replace(/\+/g, '-').replace(/=/g, '');
            const finalUrl = `${uvBase}${encodedUrl}`;

            const pageHTML = `
                <html>
                <head>
                    <title>Classes</title>
                    <link rel="icon" type="image/png" href="https://ssl.gstatic.com">
                    <style>body,html{margin:0;padding:0;height:100%;overflow:hidden;background:#000;}iframe{width:100%;height:100%;border:none;}</style>
                </head>
                <body>
                    <iframe src="${finalUrl}"></iframe>
                    <script>
                        window.onbeforeunload = () => "Safety";
                        window.addEventListener('keydown', (e) => {
                            if (e.code === 'Backslash') { window.onbeforeunload = null; window.location.replace("${esc}"); }
                        });
                        setInterval(() => { window.focus(); }, 500);
                    <\/script>
                </body>
                </html>
            `;

            const blob = new Blob([pageHTML], { type: 'text/html' });
            const win = window.open('about:blank', '_blank');
            if (win) win.location.href = URL.createObjectURL(blob);
        }

        // Security check for lockout from v30
        function checkSecurity() {
            const lockUntil = parseInt(localStorage.getItem('lockUntil') || "0");
            if (Date.now() < lockUntil) {
                document.body.innerHTML = "<h1 style='color:red; text-align:center; margin-top:100px;'>SYSTEM LOCKED</h1>";
            }
        }
    </script>
</body>
</html>
